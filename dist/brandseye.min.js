!function(t,e){"use strict";var r={};r.VERSION="1.3.4",t.brandseye=r,r.colours={scheme:["#58B6FF","#5473BD","#DF71FC","#9856B0","#ff58a3","#D22D6F","#fc6a4b","#E53E39","#FFD658","#E8AF44","#43C278","#318F58"],allColours:["#f0f8ff","#faebd7","#00ffff","#7fffd4","#f0ffff","#f5f5dc","#ffe4c4","#000000","#ffebcd","#0000ff","#8a2be2","#a52a2a","#deb887","#5f9ea0","#7fff00","#d2691e","#ff7f50","#6495ed","#fff8dc","#dc143c","#00ffff","#00008b","#008b8b","#b8860b","#a9a9a9","#006400","#bdb76b","#8b008b","#556b2f","#ff8c00","#9932cc","#8b0000","#e9967a","#8fbc8f","#483d8b","#2f4f4f","#00ced1","#9400d3","#ff1493","#00bfff","#696969","#1e90ff","#d19275","#b22222","#fffaf0","#228b22","#ff00ff","#dcdcdc","#f8f8ff","#ffd700","#daa520","#808080","#008000","#adff2f","#f0fff0","#ff69b4","#cd5c5c","#4b0082","#fffff0","#f0e68c","#e6e6fa","#fff0f5","#7cfc00","#fffacd","#add8e6","#f08080","#e0ffff","#fafad2","#d3d3d3","#90ee90","#ffb6c1","#ffa07a","#20b2aa","#87cefa","#8470ff","#778899","#b0c4de","#ffffe0","#00ff00","#32cd32","#faf0e6","#ff00ff","#800000","#66cdaa","#0000cd","#ba55d3","#9370d8","#3cb371","#7b68ee","#00fa9a","#48d1cc","#c71585","#191970","#f5fffa","#ffe4e1","#ffe4b5","#ffdead","#000080","#fdf5e6","#808000","#6b8e23","#ffa500","#ff4500","#da70d6","#eee8aa","#98fb98","#afeeee","#d87093","#ffefd5","#ffdab9","#cd853f","#ffc0cb","#dda0dd","#b0e0e6","#800080","#ff0000","#bc8f8f","#4169e1","#8b4513","#fa8072","#f4a460","#2e8b57","#fff5ee","#a0522d","#c0c0c0","#87ceeb","#6a5acd","#708090","#fffafa","#00ff7f","#4682b4","#d2b48c","#008080","#d8bfd8","#ff6347","#40e0d0","#ee82ee","#d02090","#f5deb3","#ffffff","#f5f5f5","#ffff00","#9acd32"]},r.utilities=function(){var t={text:["font-family","font-size","font-weight","color","text-anchor","fill","stroke","stroke-width","stroke-opacity","line-height"],path:["stroke","stroke-width","stroke-opacity","shape-rendering","fill","fill-opacity"],rect:["fill","fill-opacity","stroke","stroke-width","stroke-opacity"],g:["opacity"],line:["fill","fill-opacity","stroke","stroke-width","stroke-opacity","shape-rendering"]},r=function(e){var n=t[e.prop("tagName")];if(n)for(var a=0;a<n.length;a++){var i=n[a],s=e.css(i);s&&e.css(i,s)}var o=e.children();for(a=0;a<o.length;a++)r($(o[a]))};return{restrictStringToLength:function(t,e){if(t.length<=e)return t.toString();for(var r=[],n=[],a=0;e-1>a;a++){var i=t.charAt(a);" "==i||"\n"==i?(0==r.length?r=r.concat(n):(r.push(" "),r=r.concat(n)),n=[]):n.push(i)}return 0!=t.length&&0==r.length?r=t:r.push("…"),r.length>e?r.substring(0,e-1)+"…":r.join("")},convertSvgElementToXml:function(t){var e=t.width(),n=t.height();t.attr("xmlns","http://www.w3.org/2000/svg"),t.attr("width",e),t.attr("height",n),t.attr("version","1.1"),r(t);var a=t.parent().html().trim();return a=a.replace(/ class="[^"]+"/g,""),a=a.replace(/ transform="translate \(/g,' transform="translate('),a=a.replace(/clip-path=""/g,""),a=a.replace(/d="MZ"/g,""),a=a.replace(/x="NaN"/g,'x="0"')},removeQuotes:function(t,e){var r=t.length-1;if(0>=r)return t;if(e){if(t.charAt(0)!=e)return t}else if(e=t.charAt(0),'"'!=e&&"'"!=e)return t;if(t.charAt(r)!=e)return t;var n=t.indexOf("\\",1);if(0>n)return t.substring(1,r);for(var a=t.substring(1,n);r>n;){var i=t.charAt(n++);"\\"==i&&(i=t.charAt(n++)),a+=i}return a},formatPercentage:function(t,r){r===e&&(r=2);var n=Math.pow(10,r);return(Math.round(t*n)/n).toString()+"%"},formatSi:function(t){if(t=Math.round(t),t/1e9>=1){var e=Math.round(t/1e9);return e+"G"}if(t/1e6>=1){var e=Math.round(t/1e6);return e+"M"}if(t/1e3>=1){var e=Math.round(t/1e3);return e+"k"}return t},random:function(t){return function(){return(t=(9301*t+49297)%233280)/233280}}}}(),r.charts=function(){function t(t,e){t.selectAll("text").append("title").text(function(t){return _(e).isFunction()?e(t):e&&_(e).has(t)?e[t]:t})}function n(t,e){e&&t.selectAll("text").each(function(t){e[t]&&d3.select(this).text(e[t])})}function a(t,e){if(e=e.toString(),t||(t=u),e.length<=t)return e;var n,a=/^(\w+)\s+\d+$/,i=/^(\w+)\s+\([\w\s]+\)$/,s=/^www\.(\w+)\..*$/;return(n=e.match(a))?e=n[1]+"…":(n=e.match(i))?e=n[1]+"…":(n=e.match(s))&&(e=n[1]+"…"),r.utilities.restrictStringToLength(e,t)}function i(t,e,r,n){r||(r=".nv-bar"),n||(n=_.identity),t.selectAll(r).each(function(t){t=n(t);var r=!1,a=!1;if(_(e(t)).isString()){var i=e(t).toLowerCase();r="others"===i,a="unknown"===i}d3.select(this).classed("other",r).classed("unknown",a)})}function s(t,e,r,n,a,i,s){_(s).isUndefined()&&(s=_.identity),r.on("elementClick",function(e){t.elementClick(e)}),n.on("tooltipShow",function(e){t.tooltipShow(e)}),n.on("tooltipHide",function(e){t.tooltipHide(e)}),e.selectAll(i).on("mouseup",function(e){var r={point:s(e),e:d3.event,series:a[e.series]};2==d3.event.which&&t.elementMiddleClick(r),3==d3.event.which&&t.elementRightClick(r)})}var o={},l="#f8f8f8",u=15,c=25,h="",f=/^\d+-\d+-\d+(\s\d\d:\d\d)?$/;return o.Graph=function(){return this},o.Graph.prototype={createAttributes:function(){this.attributes={data:[],width:250,height:250,duration:250,x:function(t){return t.x},y:function(t){return t.y},colours:r.colours.scheme,showLegend:!0,coarseness:"daily",padding:{left:0,right:0,bottom:0,top:0},dispatch:d3.dispatch("elementClick","elementMiddleClick","elementRightClick","tooltipShow","tooltipHide"),labelFormat:d3.format(",.f"),tickFormat:d3.format(",.f"),showLabels:!1,zeroOpacity:0}},render:function(){this.setup();var t=d3.select(this.element());t.selectAll("svg").empty()&&t.append("svg");var e=t.select("svg"),r=this.attributes.nvChart,n=this;return e.datum(this.getDataToSet()).transition().duration(this.duration()).call(function(t){n.initialiseData(),n.arrangeLegend(t);var e=n.calculateMargins(t);if(n.dataAxisLabel()&&("rows"==n.labelPosition||"columns"==n.labelPosition)){var a=n.drawAxisDataLabel(t,e);"columns"==n.labelPosition&&(e.left=(e.left||0)+a),"rows"==n.labelPosition&&(e.bottom=(e.bottom||0)+a)}n.setupChart(e),n.attributes.forceMaxY&&(r.forceY?r.forceY([n.attributes.forceMinY,n.attributes.forceMaxY]):r.multibar&&r.multibar.forceY([n.attributes.forceMinY,n.attributes.forceMaxY])),n.preRenderXAxisTicks(),n.preRenderYAxisTicks(),r(t),n.postRenderXAxisTicks(),n.postRenderYAxisTicks(),n.setupContainer(),n.arrangeTicks(),n.arrangeLabels(t);var o=d3.select(r.container);s(n.dispatch(),o,n.graphDispatch(),r.dispatch,n.data(),n.interactiveClass(),n.dataTransform),r.multibar&&i(t,n.x())}),this},setup:function(){this.attributes.hasBeenSetup||(this.attributes.nvChart=this.createChart(),this.attributes.legend=o.chartLegend(),this.attributes.labels=o.chartLabel()),this.attributes.hasBeenSetup=!0},createChart:function(){throw new Error("createChart not implemented")},initialiseData:function(){var t=this.data(),e=0,r=this.tickFormat();t&&_(t).each(function(t,n){_(t.values).each(function(t){t.legendKey=n;var a=r(t).length;a>e&&(e=a)})}),this.attributes.maxLabelLength=e},getDataToSet:function(){return this.data()},drawAxisDataLabel:function(t,e){var r=0,n=this.labelPosition,a=this.dataAxisLabel(),i=this.width(),s=this.height(),o=this.zeroOpacity();e=_.extend({left:0,top:0,bottom:0,right:0},e||{});var l=this.data();return l&&t.each(function(){var t=d3.select(this).selectAll(".data-label").data([a]);t.enter().append("text").style("opacity",o).classed("data-label",!0),t.text(a.long);var l=t.node().getBBox();l.width>("rows"===n?3*(i-e.left-e.right)/4:3*(s-e.bottom-e.top)/4)&&(t.text(a.short),l=t.node().getBBox());var u=0,c=0,h="columns"==n?5:0;if("rows"==n)u=e.left+(i-e.left-e.right)/2-l.width/2,c=s-e.bottom+l.height;else{if("columns"!=n)throw new Error("Unrecognised orientation ["+n+"]");u=l.height,c=e.top+(s-e.bottom-e.top)/2+l.width/2}t.attr("transform",function(){var t="translate("+[u+h,c]+")";return"columns"==n?t+" rotate(-90)":t}).transition().duration(750).style("opacity",1),r=l.height+h}),r},setupChart:function(t){var e=this.nvChart();e.margin(t).width(this.width()).height(this.height()).showLegend(!1).x(this.x()).y(this.y()).noData(h).tooltips(!1).color(this.colours()),e.reduceXTicks&&e.reduceXTicks(!1),e.showControls&&e.showControls(!1),e.showLabels&&e.showLabels(!1)},preRenderXAxisTicks:function(){},postRenderXAxisTicks:function(){var e=this.nvChart(),r=d3.select(e.container),a=r.select(".nv-x.nv-axis > g").selectAll("g");a.selectAll("text").classed("x-axis-label",!0),n(a,this.xAxisOverride()),t(a,this.xAxisTooltips())},preRenderYAxisTicks:function(){var t=this.nvChart();t.yAxis&&t.yAxis.tickFormat(this.tickFormat()).showMaxMin(!1)},postRenderYAxisTicks:function(){var e=this.nvChart(),r=d3.select(e.container),n=r.select(".nv-y.nv-axis > g").selectAll("g");n.selectAll("text").classed("y-axis-label",!0),t(n,this.tickFormat())},setupContainer:function(){var t=this.nvChart(),e=t.multibar.xScale(),r=t.multibar.yScale(),n=d3.select(t.container),a=Math.max.apply(Math.max,r.range()),i=_(e.rangeExtent()).last();if(0==r.range()[0]){var s=a;a=i,i=s}n.classed("bm",!0),n.selectAll(".chart-background").remove(),n.select(".nv-wrap").insert("rect",":first-child").attr("class","chart-background").attr("fill",this.backgroundColour()).attr("width",i).attr("height",a)},calculateLegendMargin:function(){return{top:0,left:60,right:this.width()}},arrangeLegend:function(t){this.attributes.legend.colours(this.colours()).margin(this.calculateLegendMargin()).height(this.height()).width(this.width()).showLegend(this.showLegend()),t.call(this.attributes.legend)},defaultMargins:function(){return{top:30,bottom:"weekly"===this.coarseness()?45:40,left:40,right:20}},calculateMargins:function(){var t=this.attributes.maxLabelLength||0,e=this.defaultMargins(),r=this.padding();return t&&(e.left=(e.left||0)+10*t),e.left+=r.left,e.right+=r.right,e.bottom+=r.bottom,e.top+=r.top,e.bottom=e.bottom+this.attributes.legend.finalHeight()+this.defaultMarginBottom(),e},defaultMarginBottom:function(){return 20},arrangeTicks:function(){d3.select(this.nvChart().container).select(".nv-x.nv-axis > g").selectAll("g").selectAll(".tick > line").style("opacity",this.zeroOpacity())},arrangeLabels:function(t){var e=this.nvChart(),r=this.labels();r.x(this.x()).y(this.y()).width(this.width()-e.margin().left-e.margin().right).height(this.height()).xScale(e.multibar.xScale()).yScale(e.multibar.yScale()).delay(1200).format(this.labelFormat()).position(this.labelPosition).determineCompression(this.labelCompression()).zeroOpacity(this.zeroOpacity()).showLabels(this.showLabels()),r(t)},labelPosition:"columns",data:function(t){return arguments.length?(t&&!t.length&&(t=[t]),t&&t[0].key===e&&(t=[{key:"series 1",values:t}]),this.attributes.data=t||[],this):this.attributes.data},element:function(t){return arguments.length?(this.attributes.element=t,this):this.attributes.element},nvChart:function(){return this.attributes.nvChart},width:function(t){return arguments.length?(this.attributes.width=t,this):this.attributes.width},height:function(t){return arguments.length?(this.attributes.height=t,this):this.attributes.height},x:function(t){return arguments.length?(this.attributes.x=t,this):this.attributes.x},y:function(t){return arguments.length?(this.attributes.y=t,this):this.attributes.y},tickFormat:function(t){return arguments.length?(this.attributes.tickFormat=t,this):this.attributes.tickFormat},labelFormat:function(t){return arguments.length?(this.attributes.labelFormat=t,this):this.attributes.labelFormat},labelCompression:function(t){return arguments.length?(this.attributes.labelCompression=t,this):this.attributes.labelCompression},showLabels:function(t){return arguments.length?(this.attributes.showLabels=t,this):this.attributes.showLabels},labels:function(){return this.attributes.labels},tooltip:function(){return this},forceY:function(t){return arguments.length?(_.isArray(t)?(this.attributes.forceMinY=t[0],this.attributes.forceMaxY=t[1]):(this.attributes.forceMinY=0,this.attributes.forceMaxY=t),this):[this.attributes.forceMinY,this.attributes.forceMaxY]},xAxisTooltips:function(t){return arguments.length?(this.attributes.xAxisTooltips=t,this):this.attributes.xAxisTooltips},xAxisOverride:function(t){return arguments.length?(this.attributes.xAxisOverride=t,this):this.attributes.xAxisOverride},colours:function(t){return arguments.length?(this.attributes.colours=t&&t.length?t.concat(r.colours.allColours):r.colours.allColours,this):this.attributes.colours},backgroundColour:function(t){return arguments.length?(this.attributes.backgroundColour=t,this):this.attributes.backgroundColour||l},coarseness:function(t){return arguments.length?(this.attributes.coarseness=t,this):this.attributes.coarseness},showLegend:function(t){return arguments.length?(this.attributes.showLegend=t,this):this.attributes.showLegend},dataAxisLabel:function(t){return arguments.length?(_(t).isString()&&(t={"long":t,"short":t}),this.attributes.dataAxisLabel=t,this):this.attributes.dataAxisLabel},zeroOpacity:function(t){return arguments.length?(this.attributes.zeroOpacity=t,this):this.attributes.zeroOpacity},duration:function(t){return arguments.length?(this.attributes.duration=t,this):this.attributes.duration},padding:function(t){return arguments.length?(this.attributes.padding={top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0},this):this.attributes.padding},dispatch:function(){return this.attributes.dispatch},graphDispatch:function(){var t=this.nvChart();if(t.multibar)return t.multibar.dispatch;if(t.pie)return t.pie.dispatch;if(t.lines)return t.lines.dispatch;throw new Error("Unable to determine graph dispatch")},interactiveClass:function(){return".nv-bar"},dataTransform:function(t){return t}},o.Histogram=function(){return o.Graph.prototype.createAttributes.call(this),this},o.Histogram.prototype=new o.Graph,o.Histogram.prototype.createChart=function(){return nv.models.multiBarChart()},o.Histogram.prototype.defaultMarginBottom=function(){return"hourly"==this.coarseness()?40:20},o.Histogram.prototype.arrangeTicks=function(){var t=!1,e=this,r=d3.select(this.nvChart().container),n=r.select(".nv-x.nv-axis > g").selectAll("g"),a=this.nvChart().multibar.xScale(),i=function(t){return 1===t.day()&&(0!=t.hour()||"hourly"!=e.coarseness())},s=function(t){return 0==t.hour()&&0==t.minute()},o={};e.data()&&e.data().length>1&&_(e.data()).each(function(t){_(t.values).each(function(t){if(t.originalPublished){var e=o[t.published]||[];e.push(t.originalPublished),o[t.published]=e}})}),_(o).each(function(t,e){o[e]=_(t).uniq()}),n.selectAll("text").classed("x-axis-label",!0).each(function(r,n){var l=new moment(r),u="dddd, MMMM D, YYYY";if(!r||t)return t=!0,void 0;var c="hourly"!=e.coarseness()&&i(l),h="hourly"==e.coarseness()?30:20,f=a.rangeBand()/e.data().length<h||e.longFormat(l,n)||c||s(l)||_(e.data()).any(function(t){return t.values[0].published===r}),d="monthly"===e.coarseness()||"weekly"===e.coarseness()?-30:-90,g="monthly"===e.coarseness()||"weekly"===e.coarseness()?0:5;d3.select(this).style("text-anchor",f?"end":"middle").attr("class",function(t){return!t||"daily"!==e.coarseness()&&"hourly"!==e.coarseness()?"":0===l.month()&&1===l.date()&&s(l)?"year-begin":1==l.date()&&s(l)?"month-begin":1==l.day()&&s(l)?"week-begin":"hourly"===e.coarseness()&&s(l)?"day-begin":"standard-day"}).attr("transform",f?"translate (-10, "+g+") rotate("+d+" 0,0)":"").append("title").text(function(t){if(_(o).isEmpty()||!o[t])switch(e.coarseness()){case"weekly":return"The week of "+l.format(u)+", to "+l.clone().add("days",6).format(u);case"monthly":return"The month of "+l.format("MMMM");case"yearly":return"The year "+l.format("YYYY");case"daily":default:return l.format(u)}var r=o[t],n="ddd MMM D, YYYY",a=new moment(r[0]).format(n);return _(o[t]).chain().drop(1).reduce(function(t,e){return t+"\nvs\n"+new moment(e).format(n)},a).value()})}),e.data()&&(a.rangeBand()<12&&n.selectAll("text").classed("smaller-text",!0),a.rangeBand()<10&&n.selectAll(".standard-day").style("opacity",e.zeroOpacity())),n.selectAll(".tick > line").style("opacity",this.zeroOpacity())},o.Histogram.prototype.preRenderXAxisTicks=function(){var t=this.nvChart(),e=this;t.xAxis&&t.xAxis.tickFormat(function(t,r){if(!f.test(t))return t;var n=new moment(t);switch(e.coarseness()){case"hourly":return e.longFormat(n,r)&&0==n.hour()||0==r?n.format("MMM D, HH:mm"):1===n.day()&&0==n.hour()?n.format("ddd DD, HH:mm"):0==n.hour()?n.format("ddd D, HH:mm"):n.format("HH:mm");case"daily":return e.longFormat(n,r)?n.format("MMM DD"):1===n.day()?n.format("ddd DD"):n.format("DD");case"weekly":var a=n.clone().add("days",6),i=n.format("MMM DD")+"→";return i+=a.months()===n.months()?a.format("DD"):a.format("MMM DD");case"monthly":return 0==n.month()?n.format("MMMM ’YY"):n.format("MMMM");case"yearly":return n.format("YYYY")}})},o.Histogram.prototype.postRenderXAxisTicks=function(){},o.Histogram.prototype.longFormat=function(t,e){return 0===e||1===t.date()&&("hourly"!==this.coarseness()||0==t.hour()&&0==t.minute())},o.BarChart=function(){return o.Graph.prototype.createAttributes.call(this),this},o.BarChart.prototype=new o.Graph,o.BarChart.prototype.createChart=function(){return nv.models.multiBarHorizontalChart()},o.BarChart.prototype.labelPosition="rows",o.BarChart.prototype.initialiseData=function(){var t=this.data(),e=this.xAxisOverride(),r=25,n=0,i=this.x();t&&_(t).each(function(t,s){_(t.values).each(function(t){t.legendKey=s;var o=i(t);e&&e[o]&&(o=e[o]);var l=a(r,o.toString()).length;l>n&&(n=l)})}),this.attributes.maxLabelLength=n},o.BarChart.prototype.preRenderXAxisTicks=function(){this.nvChart().xAxis.tickFormat(_.partial(a,c))},o.BarChart.prototype.calculateLegendMargin=function(){return{top:0,left:30,right:this.width()}},o.BarChart.prototype.calculateMargins=function(){var t={left:30,right:30,top:20,bottom:20},e=this.padding(),r=this.attributes.maxLabelLength||0;return t.bottom=(t.bottom||0)+this.attributes.legend.finalHeight()+20,r&&(t.left=8*r),t.left+=e.left,t.right+=e.right,t.bottom+=e.bottom,t.top+=e.top,t},o.ColumnChart=function(){return o.Graph.prototype.createAttributes.call(this),this},o.ColumnChart.prototype=new o.Graph,o.ColumnChart.prototype.createChart=function(){return nv.models.multiBarChart()},o.ColumnChart.prototype.initialiseData=function(){var t=this.data();if(t){var e=this.xAxisOverride(),r=this.x(),n=this.y(),i=this.tickFormat(),s=0,o=0;_(t).each(function(t,l){_(t.values).each(function(t){t.legendKey=l;var u=r(t);e&&e[u]&&(u=e[u]);var h=a(c,u.toString()).length;h>s&&(s=h),u=i(n(t)),h=u.toString().length,h>o&&(o=h)})}),this.attributes.maxXLabelLength=s,this.attributes.maxYLabelLength=o}},o.ColumnChart.prototype.preRenderXAxisTicks=function(){this.nvChart().xAxis.tickFormat(_.partial(a,c))},o.ColumnChart.prototype.postRenderXAxisTicks=function(){var e=this.nvChart(),r=this.xAxisOverride(),a=d3.select(e.container),i=a.select(".nv-x.nv-axis > g").selectAll("g");a.select(".nv-x.nv-axis > g").selectAll("g").selectAll("text").filter(function(t){return null!=t&&(r&&r[t]&&r[t].length>2||t.toString().length>2)}).style("text-anchor","end").attr("transform","rotate(-30 0,0)"),n(i,this.xAxisOverride()),t(i,this.xAxisTooltips())},o.ColumnChart.prototype.calculateLegendMargin=function(){return{top:0,left:this.nvChart().margin().left,right:this.width()}},o.ColumnChart.prototype.calculateMargins=function(){var t=nv.models.multiBarChart().margin(),e=this.padding();t={top:t.top,bottom:t.bottom,left:t.left,right:t.right};var r=this.attributes.maxXLabelLength||0,n=this.attributes.maxYLabelLength||0;return t.bottom=(t.bottom||0)+this.attributes.legend.finalHeight(),r&&(t.bottom=(t.bottom||0)+3*r),n&&(t.left=(t.left||0)+3*n),t.left+=e.left,t.right+=e.right,t.bottom+=e.bottom,t.top+=e.top,t},o.PieChart=function(){return o.Graph.prototype.createAttributes.call(this),this},o.PieChart.prototype=new o.Graph,o.PieChart.prototype.createChart=function(){return nv.models.pieChart()},o.PieChart.prototype.labelPosition="circle",o.PieChart.prototype.getDataToSet=function(){var t=this.data();return t&&t.length?this.data()[0].values:t},o.PieChart.prototype.initialiseData=function(){var t=this.data(),e=this.xAxisOverride(),r=this.x();t&&(_(t).each(function(t){_(t.values).each(function(t,e){t.legendKey=e})}),this.attributes.labelItems=t&&t.length?_(t[0].values).map(function(t){var n=r(t);return e&&e[n]&&(n=e[n]),{key:n}}):[])},o.PieChart.prototype.defaultMargins=function(){return{top:0,bottom:0,left:0,right:0}},o.PieChart.prototype.defaultMarginBottom=function(){return 0},o.PieChart.prototype.arrangeLegend=function(t){this.attributes.legend.data(this.attributes.labelItems).colours(this.colours()).margin({top:0,left:30,right:this.width()}).height(this.height()).width(this.width()).showLegend(this.showLegend()).forceLegend(!0),t.call(this.attributes.legend)},o.PieChart.prototype.setupContainer=function(){d3.select(this.nvChart().container).classed("bm",!0)},o.PieChart.prototype.arrangeLabels=function(t){var e=this.labels(),r=this.nvChart();e.x(this.x()).y(this.y()).width(this.width()-r.margin().left-r.margin().right).height(this.height()-r.margin().top-r.margin().bottom).format(this.labelFormat()).position("circle").determineCompression(this.labelCompression()).zeroOpacity(this.zeroOpacity()).showLabels(this.showLabels()),e(t)},o.PieChart.prototype.interactiveClass=function(){return".nv-slice"},o.PieChart.prototype.dataTransform=function(t){return t.data},o.LineChart=function(){return o.Graph.prototype.createAttributes.call(this),this},o.LineChart.prototype=new o.Graph,o.LineChart.prototype.createChart=function(){return nv.models.lineChart()},o.LineChart.prototype.setupContainer=function(){},o.LineChart.prototype.arrangeLabels=function(){},o.LineChart.prototype.initialiseData=function(){o.Graph.prototype.initialiseData.apply(this);var t=this.data(),e=this.x(),r=!1;_(t).each(function(t){_(t.values).each(function(t){_(e(t)).isString()&&(t.publishedStamp=new moment(e(t)).unix(),r=!0)})}),r&&(e=function(t){return t.publishedStamp}),this.attributes.chartX=e},o.LineChart.prototype.setupChart=function(t){this.nvChart().margin(t).width(this.width()).height(this.height()).showLegend(!1).x(this.attributes.chartX).y(this.y()).noData(h).tooltips(!1).color(this.colours()),this.nvChart().xScale(d3.time.scale())},o.LineChart.prototype.preRenderXAxisTicks=function(){var t=this.attributes.chartX,e=this.x();this.nvChart().xAxis.tickFormat(function(r){if(!f.test(r)&&t===e)return r;var n=t===e?new moment(r):moment.unix(r);return n.format("MMM DD")})},o.LineChart.prototype.postRenderXAxisTicks=function(){},o.LineChart.prototype.arrangeTicks=function(){var t=this.data(),e=this.nvChart(),r=this.attributes.chartX,n=this.x(),a={};t&&t.length>1&&_(t).each(function(t){_(t.values).each(function(t){if(t.originalPublished){var e=a[t.published]||[];e.push(t.originalPublished),a[t.published]=e}})}),_(a).each(function(t,e){a[e]=_(t).uniq()});var i=!1,s=d3.select(e.container),o=s.select(".nv-x.nv-axis > g").selectAll("g");o.selectAll("text").classed("x-axis-label",!0).each(function(t){var e=r===n?new moment(t):moment.unix(t),s="dddd, MMMM D, YYYY";if(!t||i)return i=!0,void 0;var o=-30,l=0;d3.select(this).style("text-anchor","end").attr("transform","translate (-20, "+l+") rotate("+o+" 0,0)").append("title").text(function(t){if(_(a).isEmpty()||!a[t])return e.format(s);var r=a[t],n="ddd MMM D, YYYY",i=new moment(r[0]).format(n);return _(a[t]).chain().drop(1).reduce(function(t,e){return t+"\nvs\n"+new moment(e).format(n)},i).value()})}),o.selectAll(".tick > line").style("opacity",this.zeroOpacity()),s.selectAll(".nv-axisMaxMin text").each(function(){d3.select(this).style("text-anchor","end").attr("transform","rotate(-30, 0,0)")})},o.WordCloudChart=function(){return o.Graph.prototype.createAttributes.call(this),this.attributes.seed=Math.floor(1e4*Math.random()),this.attributes.x=function(t){return t.word},this.attributes.y=function(t){return t.count},this.attributes.font="sans-serif",this.attributes.layout="archimedean",this.attributes.minFont=9,this.attributes.maxFont=70,this},o.WordCloudChart.prototype=new o.Graph,o.WordCloudChart.prototype.createChart=function(){return d3.layout.cloud()},o.WordCloudChart.prototype.colours=function(t){return arguments.length?(this.attributes.colours=t&&t.length?t:r.colours.allColours,this):this.attributes.colours},o.WordCloudChart.prototype.setupContainer=function(){this.attributes.parent.classed("bm",!0)},o.WordCloudChart.prototype.arrangeLabels=function(){},o.WordCloudChart.prototype.data=function(t){return arguments.length?(this.attributes.data=t||[],this):this.attributes.data},o.WordCloudChart.prototype.render=function(){this.setup();var t=this.attributes.parent=d3.select(this.element());this.setupContainer(),t.selectAll("svg").empty()&&t.append("svg").append("g");var e=this.x(),n=this.y(),a=this.width(),i=this.height(),s=this.attributes.svg=t.select("svg");s.select("g").attr("transform","translate("+[Math.floor(a/2),Math.floor(i/2)]+")");var o,l=this.attributes.nvChart;switch(this.attributes.scale){case"linear":o=d3.scale.linear();break;case"square":o=d3.scale.sqrt();break;case"log":default:o=d3.scale.log()}var u=this.getDataToSet(),c=1/0,h=-1/0;_(u).each(function(t){n(t)<c&&(c=n(t)),n(t)>h&&(h=n(t))}),o.domain([c,h]).range([this.attributes.minFont,this.attributes.maxFont]);var f=this.attributes.font;l.random(r.utilities.random(this.seed())).spiral(this.attributes.layout).size([a,i]).timeInterval(10).text(e).fontSize(function(t){return o(n(t))}).font(f).rotate(function(){return 0}).padding(!0).on("end",_.bind(this.layoutComplete,this)).words(u).start()},o.WordCloudChart.prototype.layoutComplete=function(t){var e={},r=this.getDataToSet();if(r.length){var n=this.x(),a=this.y(),i=this.colours();_(r).each(function(t){e[n(t)]=a(t)});var s=this.dispatch(),o=this.attributes.svg.select("g").selectAll("text").data(t);o.exit().remove(),o.enter().append("text").classed("word",!0).attr("text-anchor","middle").on("click",function(t){s.elementClick(t,this)}),o.text(function(t){return t.text}).style("font-family",this.font()).on("mouseover",function(t){s.tooltipShow(t,this)}).on("mouseout",function(t){s.tooltipHide(t)}),o.transition().duration(1e3).style("font-size",function(t){return t.size+"px"}).style("fill",function(t,e){return i[e%i.length]}).attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"})}},o.WordCloudChart.prototype.layout=function(t){return arguments.length?(this.attributes.layout=t,this):this.attributes.layout},o.WordCloudChart.prototype.scale=function(t){return arguments.length?(this.attributes.scale=t,this):this.attributes.scale},o.WordCloudChart.prototype.minFont=function(t){return arguments.length?(this.attributes.minFont=t,this):this.attributes.minFont},o.WordCloudChart.prototype.maxFont=function(t){return arguments.length?(this.attributes.maxFont=t,this):this.attributes.maxFont},o.WordCloudChart.prototype.font=function(t){return arguments.length?(this.attributes.font=t,this):this.attributes.font},o.WordCloudChart.prototype.seed=function(t){return arguments.length?(this.attributes.seed=t,this):this.attributes.seed},o.WordCloudChart.prototype.stop=function(){this.attributes.nvChart&&this.attributes.nvChart.stop()},o.Sparkline=function(t,e,r,n){r=r||function(t){return t.x},n=n||function(t){return t.y};var a=$(t),i=a.width(),s=a.height();0==i&&0==s&&console.warn("Sparklines given no width/height"),$("svg",a).length||a.html("<svg></svg>");var o=d3.select(a[0]).select("svg");o.attr("width",i).attr("height",s).classed("bm",!0).classed("chart-sparkline",!0);var l=r(_(e).min(r)),u=r(_(e).max(r)),c=n(_(e).min(n)),h=n(_(e).max(n)),f=d3.scale.linear().domain([l,u]).range([0,i]),d=d3.scale.linear().domain([c,h]).range([s,0]),g=d3.svg.line().x(function(t){return f(r(t))}).y(function(t){return d(n(t))}).interpolate("linear"),p=o.selectAll(".bm-chart-sparkline-line").data([e]);p.exit().remove(),p.enter().append("path").classed("bm-chart-sparkline-line",!0),p.attr("d",g)},o.Area=function(t,e,r,n){r=r||function(t){return t.x},n=n||function(t){return t.y};var a=$(t),i=a.width(),s=a.height();0==i&&0==s&&console.warn("Area chart given no width/height"),$("svg",a).length||a.html("<svg></svg>");var o=d3.select(a[0]).select("svg");o.attr("width",i).attr("height",s).classed("bm",!0).classed("chart-sparkline",!0);var l=r(_(e).min(r)),u=r(_(e).max(r)),c=n(_(e).min(n)),h=n(_(e).max(n)),f=d3.scale.linear().domain([l,u]).range([0,i]),d=d3.scale.linear().domain([c,h]).range([s,0]),g=d3.svg.area().x(function(t){return f(r(t))}).y0(s).y1(function(t){return d(n(t))}),p=o.selectAll(".bm-chart-sparkline-area").data([e]);p.exit().remove(),p.enter().append("path").classed("bm-chart-sparkline-area",!0).style("opacity",0).transition().duration(1e3).style("opacity",1),p.attr("d",g)},o.brandsEyeApi="https://api.brandseye.com",o.loadFromApi=function(t){if(!t.account&&!t.fragment)throw new Error("Please specify an account");var r=t.username||"API_KEY",n=t.password||t.key,a=t.server||o.brandsEyeApi,i=t.success,s="Basic "+btoa(r+":"+n),l=t.fragment||"rest/accounts/"+t.account+"/mentions/count";if(t.showOthers===e&&(t.showOthers=!0),t.max&&t.showOthers&&(t.max=t.max-1),t.max&&t.showOthers&&!t.xFieldName)throw new Error("xFieldName must be set when showing Other values");var u=[];if(u.push("Authorization="+s),t.arguments)for(var c in t.arguments)u.push(c+"="+encodeURIComponent(t.arguments[c]));t.groupby&&u.push("groupby="+encodeURIComponent(t.groupby)),t.filter&&u.push("filter="+encodeURIComponent(t.filter)),t.orderby&&u.push("orderby="+encodeURIComponent(t.orderby)),t.include&&u.push("include="+encodeURIComponent(t.include));var h=a+"/"+l+"?"+u.join("&");return $.ajax({url:h,contentType:"application/json",dataType:"jsonp",success:function(e){if(401===e.status)throw new Error("You are not authorised to access this endpoint");if(e.status)throw new Error(e.error);if(t.max){var r=e;if(e=_(e).take(t.max),t.showOthers){var n=_.chain(r).rest(t.max).reduce(function(t,e){return{count:t.count+(e.count||0),ave:t.ave+(e.ave||0),ots:t.ots+(e.ots||0),percentage:t.percentage+(e.percentage||0),credibility:t.credibility+(e.credibility||0)}},{count:0,ave:0,ots:0,percentage:0,credibility:0,reach:0,engagement:0}).value();n[t.xFieldName]="Others",e.push(n)}}i(e)},error:function(){if(!t.error)throw new Error("There was an error communicating with the API");t.error()}})},o.BrandsEyeMetric=function(t){this.query=t.query,this.type=t.type,this.__proto__=new this.type;var e=this,r=t.dataTransform||_.identity;return this.run=function(n){o.loadFromApi({key:t.query.key,account:t.query.account,filter:t.query.filter,groupby:t.query.groupby,orderby:t.query.orderby,include:t.query.include,max:t.query.max,xFieldName:t.query.xFieldName,fragment:t.query.fragment,arguments:t.query.arguments,success:function(t){t=r(t),e.data(t),n(e,t)}})},this},o.VolumeMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,groupby:"published"},type:t.type||o.Histogram}),this.x(function(t){return t.published}).y(function(t){return t.count}).tickFormat(r.utilities.formatSi).dataAxisLabel("Volume"),this},o.OtsMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,include:"ots",key:t.key,groupby:"published"},type:t.type||o.Histogram}),this.x(function(t){return t.published}).y(function(t){return t.ots}).tickFormat(r.utilities.formatSi).dataAxisLabel({"long":"Opportunity to see","short":"OTS"}),this},o.AveMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,include:"ave",key:t.key,groupby:"published"},type:t.type||o.Histogram}),this.x(function(t){return t.published}).y(function(t){return t.ave}).tickFormat(function(t){return"R"+r.utilities.formatSi(t)}).dataAxisLabel({"long":"Ad-value equivalent","short":"AVE"}),this},o.EngagementMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,include:"engagement",key:t.key,groupby:"published"},type:t.type||o.Histogram}),this.x(function(t){return t.published}).y(function(t){return t.engagement}).dataAxisLabel({"long":"Engagement","short":"Engagement"}),this},o.CategoryMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,groupby:"media",include:"percentages",orderby:"count desc"},type:t.type||o.ColumnChart}),this.x(function(t){return t.media
}).y(function(t){return t.percentage}).showLabels(!0).xAxisOverride({PRESS:"Press",CONSUMER:"Consumer",ENTERPRISE:"Enterprise",DIRECTORY:"Directory",UNKNOWN:"Unknown"}).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by category"),this},o.CountryMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,include:"percentages",groupby:"country",orderby:"count desc",max:8,xFieldName:"countryName"},type:t.type||o.BarChart}),this.x(function(t){return t.countryName||t.country}).y(function(t){return t.percentage}).showLabels(!0).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by country"),this},o.LanguageMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,include:"percentages",groupby:"language",orderby:"count desc",max:8,xFieldName:"languageName"},type:t.type||o.BarChart}),this.x(function(t){return t.languageName||t.language}).y(function(t){return t.percentage}).showLabels(!0).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by language"),this},o.GenderMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,include:"percentages",groupby:"gender",orderby:"count desc"},type:t.type||o.BarChart}),this.x(function(t){return t.gender}).y(function(t){return t.percentage}).showLabels(!0).xAxisOverride({FEMALE:"Female",MALE:"Male",OTHER:"Other",UNKNOWN:"Unknown"}).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by gender"),this},o.SentimentMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,include:"percentages",groupby:"sentiment",orderby:"sentiment"},type:t.type||o.BarChart}),this.x(function(t){return t.sentimentName||t.sentiment}).y(function(t){return t.percentage}).showLabels(!0).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by sentiment"),this},o.SourceMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,include:"percentages",groupby:"site",orderby:"count desc",max:6,xFieldName:"site"},type:t.type||o.PieChart}),this.x(function(t){return t.site}).y(function(t){return t.percentage}).showLabels(!0).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by source"),this},o.AuthorMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,account:t.account,key:t.key,include:"percentages",groupby:"authorName",orderby:"count desc",max:6,xFieldName:"authorName"},type:t.type||o.ColumnChart}),this.x(function(t){return t.authorName}).y(function(t){return t.percentage}).showLabels(!0).xAxisOverride({UNKNOWN:"Unknown"}).labelFormat(r.utilities.formatPercentage).dataAxisLabel("% of mentions by source"),this},o.ReputationMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,key:t.key,fragment:"rest/accounts/"+t.account+"/score",arguments:{rootsOnly:!0}},type:t.type||o.LineChart,dataTransform:function(t){return t=_(t).chain().groupBy("brandId").values().filter(function(t){return!t[0].deleted}).map(function(t){return{key:t[0].brand,values:t}}).value()}}),this.x(function(t){return console.log(t.date),t.date}).y(function(t){return t.score}).showLabels(!0),this},o.WordCloudMetric=function(t){return o.BrandsEyeMetric.call(this,{query:{filter:t.filter,key:t.key,fragment:"rest/accounts/"+t.account+"/mentions/words",arguments:{rootsOnly:!0,limit:100}},type:t.type||o.WordCloudChart,dataTransform:function(t){return t.data}}),this},o.chartLabel=function(){function t(r){return f=r,r.each(function(t){t&&t.length&&!t[0].values&&(t=[{values:t}]);var r=t?t.length:1,l=-8,u=-15,c="middle",h="auto",f=function(t){return o(i(t))+l},d=function(t,e,n){return s(a(t))+(2*n+1)*s.rangeBand()/(2*r)};if("rows"==g){var p=f;f=d,d=p,c="start",l=-l,h="central"}if(t){var v=d3.select(this).select(".nv-wrap").selectAll(".label-plane").data(t);v.exit().remove(),v.enter().append("g").attr("class","label-plane");var x=v.selectAll(".chart-label").data(function(t){return t.values});x.exit().remove(),x.style("opacity",y),x.enter().append("text").classed("chart-label",!0).attr("text-anchor",c).attr("dx",u).attr("dominant-baseline",h).style("opacity",y).transition().delay(500).duration(b).attr("dx",0),"circle"===g?e(x):n(x,r,d,f,c,l),x.transition().delay(750).duration(b).style("opacity",m?1:y)}}),t}function e(t){function e(t){return(t.endAngle-t.startAngle)/2+t.startAngle}var r=d3.layout.pie().sort(null).value(function(t){return i(t)}),n=Math.min(u,c)/2*.85;t.data(function(t){return r(t.values)}),t.each(function(t){t.angle=e(t)}).style("text-anchor",function(t){return t.angle<Math.PI/8||t.angle>2*Math.PI-Math.PI/8?"middle":t.angle>Math.PI-Math.PI/8&&t.angle<Math.PI+Math.PI/8?"middle":0<t.angle&&t.angle<Math.PI?"start":"end"}).style("dominant-baseline",function(t){return t.angle>Math.PI/8+Math.PI/2&&t.angle<2*Math.PI-Math.PI/8-Math.PI/2?"hanging":Math.PI/2<t.angle&&t.angle<1.5*Math.PI?"middle":"auto"}).text(function(t){var e=t.endAngle-t.startAngle;return e>.15?d(i(t.data)):""}).attr("transform",function(t){var e=n*Math.cos(t.angle-Math.PI/2),r=n*Math.sin(t.angle-Math.PI/2);return"translate ("+(e+u/2)+", "+(r+c/2)+")"})}function r(t){return t>1?.95:1.05}function n(t,e,n,a,o,l){var u=r(e),c=s.rangeBand()*u,f=c/e,m=0;h&&t.each(function(t){var e=h(i(t),f);(null==m||e>m)&&(m=e)}),t.text(function(t){return d(i(t),m)}).classed("small-label",!1).style("text-anchor",function(t){return 8*t.toString().length<n(t)?"end":o}).attr("x",function(t){return 8*t.toString().length<n(t)?n.apply(this,arguments)-2*l:n.apply(this,arguments)}).attr("y",a);var b=_.once(function(){var e=!1;t.each(function(){if(!e){var t=this.getBBox(),r="columns"==g?t.width:t.height;e=e||r>f}}),e&&t.remove()});p?_.delay(function(){var e=!1;t.each(function(){if(!e&&$(this).is(":visible")){var t=this.getBBox();e=e||t.width>f}}),t.classed("small-label",e),b()},500):b()}var a,i,s,o,l,u,c,h,f,d=_.identity,g="columns",p=!1,m=!0,b=500,y=0;return t.show=function(){d3.select(f.node()).selectAll(".chart-label").transition().duration(b).style("opacity",1)},t.hide=function(t){_(t).isUndefined()&&(t=b),d3.select(f.node()).selectAll(".chart-label").transition().duration(t).style("opacity",y)},t.isSpaceForLabels=function(){f.each(function(t){if(!t)return!0;var e=t.length,n=r(e)/e,a=!1;d3.select(this).selectAll(".chart-label").each(function(){if(!a){var t=this.getBBox();a=a||t.width>n}})})},t.position=function(e){return arguments.length?(g=e,t):g},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(i=e,t):i},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.delay=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(s=e,t):s},t.yScale=function(e){return arguments.length?(o=e,t):o},t.zeroOpacity=function(e){return arguments.length?(y=e,t):y},t.format=function(e){return arguments.length?(d=e,t):d},t.determineCompression=function(e){return arguments.length?(h=e,t):h},t.scale=function(e){return arguments.length?(p=e,t):p},t.showLabels=function(e){return arguments.length?(m=e,t):m},t},o.chartLegend=function(){function t(f){var d=10,g=2,p=5,m=15,b=10,y=5,v=0;return f.each(function(t){if(t){var x=d3.select(this).selectAll(".legend").data([s||t]);if(!o&&(s||t).length<=1||!c)return u=0,x.remove(),void 0;x.enter().append("g").classed("legend",!0),x.exit().remove();var C=x.selectAll(".legend-entry").data(function(t){return t});C.exit().remove();var w=C.enter();w.append("g").classed("legend-entry",!0).on("mouseover",function(t,e){var r=d3.select(f.node());r.selectAll(".nv-slice").classed("bar-fade",function(t){return t.data.legendKey!=e}),r.selectAll(".nv-bar").classed("bar-fade",function(t){return t.legendKey!=e}).classed("bar-highlight",function(t){return t.legendKey==e}),r.selectAll(".chart-label").classed("bar-fade",function(t){return t.data?t.data.legendKey!=e:t.legendKey!=e})}).on("mouseout",function(){var t=d3.select(f.node());t.selectAll(".nv-slice").classed("bar-highlight",!1).classed("bar-fade",!1),t.selectAll(".nv-bar").classed("bar-highlight",!1).classed("bar-fade",!1),t.selectAll(".chart-label").classed("bar-fade",!1)}).each(function(){var t=d3.select(this);t.append("rect").attr("width",10).attr("height",10).attr("rx",2).attr("ry",2),t.append("text").attr("dx",10+g).attr("dy",10),t.append("title")}).style("opacity",h).transition().duration(750).style("opacity",1),C.each(function(t,r){d3.select(this).select("rect").style("fill",function(){return e?t.color||e[r%e.length]:t.color||"black"})});var M=0;C.selectAll("text").text(function(){return a(30,r.utilities.removeQuotes((s||t)[M++].key.toString()))}),M=0,C.selectAll("title").text(function(){return r.utilities.removeQuotes((s||t)[M++].key.toString())});var A=0;C.each(function(){var t=d3.select(this).node().getBBox().width;t>A&&(A=t)}),A+=d;var k=n-l.left,L=Math.floor(k/A);A+=Math.floor(k%A/L),1/0===A&&(A=n);var F=0;C.attr("transform",function(){var t=F*A,e=v;return F+=1,F>=L&&(F=0,v=v+b+y),"translate ("+t+","+e+")"}),u=v+b+p,x.attr("transform","translate("+l.left+","+(i-u)+")"),u+=m}}),t}var e,n,i,s,o,l={top:0,left:0,right:180},u=0,c=!0,h=0;return t.margin=function(e){return arguments.length?(l=e,t):l},t.colours=function(n){return arguments.length?(e=n.concat(r.colours.allColours),t):e},t.finalHeight=function(){return u},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(i=e,t):i},t.data=function(e){return arguments.length?(s=e,t):s},t.showLegend=function(e){return arguments.length?(c=e,t):c},t.forceLegend=function(e){return arguments.length?(o=e,t):o},t.zeroOpacity=function(e){return arguments.length?(h=e,t):h},t},o}()}(this);